<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script type="text/javascript">
var xhr = null;

function getXHR(){
	xhr = new XMLHttpRequest(); //객체 생성
}
//first.jst(서버)로 ajax요청을 보내서 결과를 받아오는 함수

function getData(){
	getXHR();
	xhr.open('get','first.jsp',true); //ajax통신 준비
	xhr.onreadystatechange = callback;//callback 함수 지정
	//callback() 안됨. 하면 한번 실행하고 끝남.
	//readystatechange 값이 바뀔때마다 callback 함수 실행 
	xhr.send(null); //ajax통신 요청 get 일때는 null
}

function postData(){
	getXHR();
	xhr.open('post','first.jsp',true); // ajax통신 준비
	xhr.onreadystatechange = callback; // callback 함수 지정
	xhr.send(); // ajax통신 요청
}

function callback(){
	if(xhr.readyState == 4 && xhr.status==200){
		var result = document.getElementById("display")
		result.value = xhr.responseText;
	}
}

</script>
</head>
<body>
	<h1>ajax test</h1>
	<input type="button" value="get data" onclick="getData()">
	<input type="button" value="post data" onclick="postData()">
	<hr>
	<textarea rows="10" cols="80" id = "display"></textarea>
</body>
</html>